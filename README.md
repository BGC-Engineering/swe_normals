# Introduction 
This is a simple repository to generate percent normal SWE rasters from the copernicus and snodas datasets for the Pembina Snowpack report. The script was written by Evelyn Moorhouse, but any member of the data science team will be able to help trouble shoot errors. 

## Running the Script

Clone the repository from: https://github.com/BGC-Engineering/swe_normals.git or reach out to Evelyn M for a local zipped copy.

Once cloned, create a new environment and then activate it. You need to use python version 3.11. If you are using conda then the following command will work in the terminal:

```bash
conda create -n swe-normals python=3.11.5
conda activate swe-normals
```

Once you have created the new environment, navigate to the path the swe_normals repository is located at and install the requirements.txt

```bash
pip install -r requirements.txt
```
Now you should be able to run the script to generate the normals `.tif` files. 

Navigate to the location of the python file `get_swe_normals.py` and in the terminal run:

```bash
python get_swe_normals.py
```

The terminal will prompt you to enter the year and month you are running the script for, using the current year and month as defaults. 

The `.tif` files will be saved in the same directory that the script is run from. Feel free to update the path if you would like them saved elsewhere. 

## Secrets

Accessing Snodas and Copernicus data, requires credentials.  The recommended way to store this information is in a file called `.env`.  Keep this file in the same directory as the one in which you are working from, for example, `C:\\Documents\my_data_pull`.

The file should have the following lines:

```bash
SNODAS_SAS=""
COPERNICUS_SAS=""
```

The sas will contain a long string beginning with a "`?`" that is generated by the Microsoft Azure Storage Explorer. If your sas does not work it is likely expired, reach out to a data science team member for a new SAS if this is the case. 


